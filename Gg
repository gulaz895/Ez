local Players = game:GetService("Players")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

local radius = 4           -- รัศมีในการวาร์ป (4 studs)
local teleportDelay = 0.2  -- ทุกกี่วิถึงจะวาร์ป

-- ฟังก์ชันสร้างเอฟเฟกต์ประกายไฟ
local function createEffect(position)
    local p = Instance.new("ParticleEmitter")
    p.Texture = "rbxassetid://4834486875" -- ประกายไฟ
    p.Rate = 100
    p.Lifetime = NumberRange.new(0.2)
    p.Speed = NumberRange.new(5,10)
    p.Rotation = NumberRange.new(0,360)
    p.RotSpeed = NumberRange.new(-180,180)
    p.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,0.5),NumberSequenceKeypoint.new(1,0)})
    p.Parent = hrp
    game.Debris:AddItem(p, 0.3) -- ลบอัตโนมัติ
end

while task.wait(teleportDelay) do
    if char and hrp then
        -- สร้างเอฟเฟกต์ก่อนวาร์ป
        createEffect(hrp.Position)

        -- สุ่มตำแหน่งในวงกลมรอบตัว
        local randomX = math.random(-radius, radius)
        local randomZ = math.random(-radius, radius)
        local offset = Vector3.new(randomX, 0, randomZ)

        -- ย้ายตำแหน่ง (วาร์ป)
        hrp.CFrame = hrp.CFrame + offset

        -- เอฟเฟกต์หลังวาร์ป
        createEffect(hrp.Position)
    end
end
